(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"Nju+":function(t,e,i){"use strict";i.r(e),i.d(e,"ProfileModule",function(){return at});var r=i("jXWH"),n=i("fXoL"),c=i("FFoR"),o=i("7dP1"),s=i("lxpx"),a=i("sYmb"),l=i("ofXK"),u=i("AytR"),p=i("0IaG"),b=i("vkgz"),f=i("2Vo4"),d=i("tk/3"),m=i("tyNb");let g=(()=>{class t{constructor(t,e,i){this.http=t,this.router=e,this.profileService=i,this.picturesForm=new f.a(null),this.picturesForm$=this.picturesForm.asObservable()}addProfilePictures(t,e,i){const r=u.a.backend.baseURL+"/profile/pictures",n=new FormData;return n.append("profileId",e),null!==i&&n.append("profilePictureName",i),t.forEach(t=>n.append("files[]",t)),this.http.post(r,n).pipe(Object(b.a)(t=>{const e=this.profileService.currentProfile;e.profilePictures=t,this.profileService.setProfile(e)}))}setPicturesForm(t){this.picturesForm.next(t)}setProfilePicture(t){return this.http.patch(u.a.backend.baseURL+"/profile/profile-picture",t).pipe(Object(b.a)(t=>{const e=this.profileService.currentProfile;e.profilePictures=t,this.profileService.setProfile(e)}))}deleteProfilePicture(t){return this.http.delete(`${u.a.backend.baseURL}/profile/picture/${t.id}`).pipe(Object(b.a)(t=>{const e=this.profileService.currentProfile;e.profilePictures=t,this.profileService.setProfile(e)}))}}return t.\u0275fac=function(e){return new(e||t)(n.fc(d.b),n.fc(m.b),n.fc(c.a))},t.\u0275prov=n.Ob({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var h=i("cp1x"),v=i("jzTg"),S=i("wSAv"),P=i("STbY"),x=i("NFeN"),w=i("bTqV");const F=["usefulSwiper"];function I(t,e){if(1&t&&(n.Yb(0,"button",14),n.Yb(1,"mat-icon",15),n.Qc(2,"more_vert"),n.Xb(),n.Xb()),2&t){n.nc();const t=n.Ec(4);n.vc("matMenuTriggerFor",t)}}function y(t,e){if(1&t){const t=n.Zb();n.Yb(0,"button",13),n.jc("click",function(){n.Hc(t);const e=n.nc().$implicit;return n.nc().setProfilePicture(e)}),n.Yb(1,"mat-icon",16),n.Qc(2,"photo_camera"),n.Xb(),n.Yb(3,"span"),n.Qc(4),n.oc(5,"translate"),n.Xb(),n.Xb()}2&t&&(n.Fb(4),n.Rc(n.pc(5,1,"protected.profile.profile-pictures-carousel-dialog.set-profile-picture")))}function O(t,e){1&t&&(n.Yb(0,"button",17),n.Yb(1,"span"),n.Qc(2),n.oc(3,"translate"),n.Xb(),n.Xb()),2&t&&(n.Fb(2),n.Rc(n.pc(3,1,"protected.profile.profile-pictures-carousel-dialog.profile-picture")))}function k(t,e){if(1&t){const t=n.Zb();n.Yb(0,"div",7),n.Tb(1,"img",8),n.Oc(2,I,3,1,"button",9),n.Yb(3,"mat-menu",null,10),n.Oc(5,y,6,3,"button",11),n.Oc(6,O,4,3,"button",12),n.Yb(7,"button",13),n.jc("click",function(){n.Hc(t);const i=e.$implicit,r=e.index;return n.nc().deleteProfilePicture(i,r)}),n.Yb(8,"mat-icon"),n.Qc(9,"delete"),n.Xb(),n.Yb(10,"span"),n.Qc(11),n.oc(12,"translate"),n.Xb(),n.Xb(),n.Xb(),n.Xb()}if(2&t){const t=e.$implicit,i=e.first,r=n.nc();n.Fb(1),n.yc("src","",r.pictureDisplayingService.srcPrefix,"",t.imageFile,"",n.Jc),n.Fb(1),n.vc("ngIf",r.data.isEditable),n.Fb(3),n.vc("ngIf",!i),n.Fb(1),n.vc("ngIf",i),n.Fb(5),n.Rc(n.pc(12,6,"actions.Delete"))}}let X=(()=>{class t{constructor(t,e,i,r,n){this.data=t,this.profilePicturesService=e,this.pictureDisplayingService=i,this.translationService=r,this.translate=n,this.imgs=[],this.config={pagination:{el:".swiper-pagination",clickable:!0},autoHeight:!0,allowTouchMove:!0,autoplay:!1,breakpoints:{300:{slidesPerView:1}},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},loop:!0}}ngOnInit(){this.initImgs(),this.updateLang()}ngOnDestroy(){this.pictureSub&&this.pictureSub.unsubscribe(),this.langSub.unsubscribe()}setProfilePicture(t){this.pictureSub=this.profilePicturesService.setProfilePicture(t).subscribe()}deleteProfilePicture(t,e){this.usefulSwiper.swiper.removeSlide(e),this.pictureSub=this.profilePicturesService.deleteProfilePicture(t).subscribe()}initImgs(){this.imgs.push(this.data.headlinePicture),this.imgs.push(...this.data.otherPictures)}updateLang(){this.translate.setDefaultLang(this.translationService.defaultLang),this.langSub=this.translationService.currentLang$.subscribe(t=>this.translate.use(t))}}return t.\u0275fac=function(e){return new(e||t)(n.Sb(p.a),n.Sb(g),n.Sb(h.a),n.Sb(s.a),n.Sb(a.d))},t.\u0275cmp=n.Mb({type:t,selectors:[["app-profile-pictures-carousel"]],viewQuery:function(t,e){if(1&t&&n.Vc(F,1),2&t){let t;n.Dc(t=n.kc())&&(e.usefulSwiper=t.first)}},decls:7,vars:2,consts:[[3,"config"],["usefulSwiper",""],[1,"swiper-wrapper"],["class","swiper-slide d-flex justify-content-center",4,"ngFor","ngForOf"],[1,"swiper-pagination"],[1,"swiper-button-next"],[1,"swiper-button-prev"],[1,"swiper-slide","d-flex","justify-content-center"],[1,"img-fluid","ml-2","mt-2","img-centered",3,"src"],["mat-icon-button","","class","pp-button",3,"matMenuTriggerFor",4,"ngIf"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",4,"ngIf"],["mat-menu-item","",3,"click"],["mat-icon-button","",1,"pp-button",3,"matMenuTriggerFor"],[1,"text-primary"],[1,"mat-text-primary"],["mat-menu-item",""]],template:function(t,e){1&t&&(n.Yb(0,"swiper",0,1),n.Yb(2,"div",2),n.Oc(3,k,13,8,"div",3),n.Xb(),n.Tb(4,"div",4),n.Tb(5,"div",5),n.Tb(6,"div",6),n.Xb()),2&t&&(n.vc("config",e.config),n.Fb(3),n.vc("ngForOf",e.imgs))},directives:[S.b,l.l,l.m,P.a,P.b,x.a,w.a,P.d],pipes:[a.c],styles:[".img-centered[_ngcontent-%COMP%]{padding:.25rem;background-color:#fff;border:1px solid #dee2e6;width:100vw;height:100vw;object-fit:cover}@media screen and (min-width:840px){.img-centered[_ngcontent-%COMP%]{width:40vw;height:70vh}}.pp-button[_ngcontent-%COMP%]{position:absolute;top:1rem;right:.5rem;z-index:10;background-color:hsla(0,0%,96.1%,.5490196078431373)}@media screen and (min-width:840px){.pp-button[_ngcontent-%COMP%]{right:5rem}}"]}),t})();var Y=i("uToo"),C=i("Zfm5"),L=i("3Pt+"),j=i("7ZcW"),M=i("kmnG"),U=i("znSr");function _(t,e){1&t&&(n.Yb(0,"mat-error"),n.Qc(1),n.oc(2,"translate"),n.Xb()),2&t&&(n.Fb(1),n.Sc(" ",n.pc(2,1,"protected.profile.upload-dialog.error.required")," "))}function D(t,e){if(1&t&&(n.Yb(0,"mat-error"),n.Qc(1),n.oc(2,"translate"),n.oc(3,"byteFormat"),n.oc(4,"byteFormat"),n.Xb()),2&t){const t=n.nc();n.Fb(1),n.Uc(" ",n.pc(2,3,"protected.profile.upload-dialog.error.max-content-size")," ",n.pc(3,5,null==t.pictures?null:t.pictures.getError("maxContentSize").maxSize)," (",n.pc(4,7,null==t.pictures?null:t.pictures.getError("maxContentSize").actualSize),"). ")}}function Q(t,e){1&t&&(n.Yb(0,"mat-icon",19),n.Qc(1," photo_camera "),n.Xb())}const R=function(t){return{"headline-picture-selected bg-primary":t}};function z(t,e){if(1&t){const t=n.Zb();n.Yb(0,"div",16),n.Oc(1,Q,2,0,"mat-icon",17),n.Yb(2,"img",18),n.jc("click",function(){return n.Hc(t),n.nc().setAsProfilePicture(null)}),n.Xb(),n.Xb()}if(2&t){const t=n.nc();n.Fb(1),n.vc("ngIf",null===t.headlineIndex.value),n.Fb(1),n.yc("src","",t.pictureDisplayingService.srcPrefix,"",t.data.profilePicture.imageFile,"",n.Jc),n.vc("ngClass",n.Ac(4,R,null===t.headlineIndex.value))}}function E(t,e){1&t&&(n.Yb(0,"mat-icon",19),n.Qc(1," photo_camera "),n.Xb())}function T(t,e){if(1&t){const t=n.Zb();n.Yb(0,"div",16),n.Oc(1,E,2,0,"mat-icon",17),n.Yb(2,"img",18),n.jc("click",function(){n.Hc(t);const i=e.index;return n.nc().setAsProfilePicture(i)}),n.Xb(),n.Xb()}if(2&t){const t=e.$implicit,i=e.index,r=n.nc();n.Fb(1),n.vc("ngIf",i===r.headlineIndex.value),n.Fb(1),n.vc("src",t,n.Jc)("ngClass",n.Ac(3,R,i===r.headlineIndex.value))}}let H=(()=>{class t{constructor(t,e,i,r,n){this.data=t,this.profilePicturesService=e,this.pictureDisplayingService=i,this.translationService=r,this.translate=n,this.maxSize=104857600,this.imgURLs=[],this.imgNames=[]}get pictures(){return this.picturesForm.get("pictures")}get headlineIndex(){return this.picturesForm.get("headlineIndex")}ngOnInit(){this.getForm(),this.updateLang()}ngOnDestroy(){this.formSub.unsubscribe(),this.langSub.unsubscribe()}savePictures(){this.profilePicturesService.addProfilePictures(this.pictures.value.files,this.data.profileId,this.headlineIndex.value?this.imgNames[this.headlineIndex.value]:null).subscribe()}updateImgURL(t){const e=this.pictureDisplayingService.detectFiles(t);this.imgNames=e.imgNames,this.imgURLs=e.imgURLs}setAsProfilePicture(t){this.picturesForm.patchValue({headlineIndex:t})}getForm(){this.formSub=this.profilePicturesService.picturesForm$.subscribe(t=>{this.picturesForm=t,this.updateImgURL(this.pictures.value.files)})}updateLang(){this.translate.setDefaultLang(this.translationService.defaultLang),this.langSub=this.translationService.currentLang$.subscribe(t=>this.translate.use(t))}}return t.\u0275fac=function(e){return new(e||t)(n.Sb(p.a),n.Sb(g),n.Sb(h.a),n.Sb(s.a),n.Sb(a.d))},t.\u0275cmp=n.Mb({type:t,selectors:[["app-upload-dialog"]],decls:24,vars:17,consts:[["mat-dialog-title",""],[1,"mat-typography"],[3,"formGroup"],[1,"button-icon-wrapper-sm","rounded-circle","d-flex","justify-content-center","align-items-center","m-auto",3,"click"],["mat-icon-button","",3,"click"],["button",""],[1,"icon-display-sm","mat-text-primary"],["formControlName","pictures","multiple","",1,"d-none",3,"accept","change"],["fileInput",""],[1,"my-3","text-center"],[4,"ngIf"],["class","d-inline picture-wrapper",4,"ngIf"],["class","d-inline picture-wrapper",4,"ngFor","ngForOf"],["align","end"],["mat-button","","mat-dialog-close","",1,"color-grey","text-white"],["mat-button","","color","primary",3,"disabled","mat-dialog-close","click"],[1,"d-inline","picture-wrapper"],["class","legend text-primary rounded",4,"ngIf"],[1,"picture-thumbnail","ml-2","mt-2",3,"src","ngClass","click"],[1,"legend","text-primary","rounded"]],template:function(t,e){if(1&t){const t=n.Zb();n.Yb(0,"h2",0),n.Qc(1),n.oc(2,"translate"),n.Xb(),n.Yb(3,"mat-dialog-content",1),n.Yb(4,"form",2),n.Yb(5,"div",3),n.jc("click",function(){n.Hc(t);const e=n.Ec(7),i=n.Ec(11);return e.focus(),i.open()}),n.Yb(6,"button",4,5),n.jc("click",function(){return n.Hc(t),n.Ec(11).open()}),n.Yb(8,"mat-icon",6),n.Qc(9,"add_photo_alternate"),n.Xb(),n.Yb(10,"ngx-mat-file-input",7,8),n.jc("change",function(t){return e.updateImgURL(t.value.files)}),n.Xb(),n.Xb(),n.Xb(),n.Yb(12,"div",9),n.Oc(13,_,3,3,"mat-error",10),n.Oc(14,D,5,9,"mat-error",10),n.Xb(),n.Xb(),n.Oc(15,z,3,6,"div",11),n.Oc(16,T,3,5,"div",12),n.Xb(),n.Yb(17,"mat-dialog-actions",13),n.Yb(18,"button",14),n.Qc(19),n.oc(20,"translate"),n.Xb(),n.Yb(21,"button",15),n.jc("click",function(){return e.savePictures()}),n.Qc(22),n.oc(23,"translate"),n.Xb(),n.Xb()}2&t&&(n.Fb(1),n.Rc(n.pc(2,11,"protected.profile.upload-dialog.title")),n.Fb(3),n.vc("formGroup",e.picturesForm),n.Fb(6),n.vc("accept","image/*"),n.Fb(3),n.vc("ngIf",e.pictures.hasError("required")&&e.pictures.touched),n.Fb(1),n.vc("ngIf",e.pictures.hasError("maxContentSize")),n.Fb(1),n.vc("ngIf",e.data.profilePicture),n.Fb(1),n.vc("ngForOf",e.imgURLs),n.Fb(3),n.Rc(n.pc(20,13,"actions.BACK")),n.Fb(2),n.vc("disabled",e.pictures.invalid)("mat-dialog-close",!0),n.Fb(1),n.Rc(n.pc(23,15,"actions.SEND")))},directives:[p.i,p.f,L.w,L.p,L.h,w.a,x.a,j.b,L.o,L.g,l.m,l.l,p.c,p.d,M.b,l.k,U.a],pipes:[a.c,j.a],styles:[".picture-wrapper[_ngcontent-%COMP%]{position:relative;width:120px}.legend[_ngcontent-%COMP%]{position:absolute;top:-42px;left:100px;background-color:#f5f5f5;z-index:20}.picture-thumbnail[_ngcontent-%COMP%]{padding:.25rem;background-color:#fff;border:1px solid #dee2e6;width:120px;height:120px;object-fit:cover}"]}),t})(),$=(()=>{class t{constructor(t,e,i,r,n,c){this.fb=t,this.profilePicturesService=e,this.dialog=i,this.translationService=r,this.translate=n,this.layoutService=c,this.maxSize=104857600,this.imgURLs=[]}get pictures(){return this.picturesForm.get("pictures")}ngOnInit(){this.initForm(),this.updateLang(),this.getLargerScreen()}ngOnDestroy(){this.langSub.unsubscribe(),this.screenSub.unsubscribe()}openDialog(){const t=new p.e;this.profilePicturesService.setPicturesForm(this.picturesForm),t.data={profileId:this.profileId,profilePicture:this.profilePicture},this.isLargerScreen?(t.minWidth=600,t.width="60vw"):(t.maxWidth="95vw",t.width="95vw"),this.dialog.open(H,t).afterClosed().subscribe(t=>{})}initForm(){this.picturesForm=this.fb.group({pictures:[void 0,[L.u.required,j.c.maxContentSize(this.maxSize)]],headlineIndex:[null,[]]})}updateLang(){this.translate.setDefaultLang(this.translationService.defaultLang),this.langSub=this.translationService.currentLang$.subscribe(t=>this.translate.use(t))}getLargerScreen(){this.screenSub=this.layoutService.onLargerScreen$.subscribe(t=>this.isLargerScreen=t)}}return t.\u0275fac=function(e){return new(e||t)(n.Sb(L.d),n.Sb(g),n.Sb(p.b),n.Sb(s.a),n.Sb(a.d),n.Sb(Y.a))},t.\u0275cmp=n.Mb({type:t,selectors:[["app-pictures-upload"]],inputs:{profileId:"profileId",profilePicture:"profilePicture"},decls:8,vars:2,consts:[[3,"formGroup"],["appClickStopPropagation","",1,"button-icon-wrapper-sm","rounded-circle","d-flex","justify-content-center","align-items-center","mat-dark-elevation-z4",3,"click"],["mat-icon-button",""],["button",""],[1,"icon-display-sm","mat-text-primary"],["formControlName","pictures","multiple","",1,"d-none",3,"accept","change"],["fileInput",""]],template:function(t,e){if(1&t){const t=n.Zb();n.Yb(0,"form",0),n.Yb(1,"div",1),n.jc("click",function(){n.Hc(t);const e=n.Ec(3),i=n.Ec(7);return e.focus(),i.open()}),n.Yb(2,"button",2,3),n.Yb(4,"mat-icon",4),n.Qc(5,"add_photo_alternate"),n.Xb(),n.Yb(6,"ngx-mat-file-input",5,6),n.jc("change",function(){return e.openDialog()}),n.Xb(),n.Xb(),n.Xb(),n.Xb()}2&t&&(n.vc("formGroup",e.picturesForm),n.Fb(6),n.vc("accept","image/*"))},directives:[L.w,L.p,L.h,C.a,w.a,x.a,j.b,L.o,L.g],styles:[""]}),t})();function N(t,e){if(1&t){const t=n.Zb();n.Yb(0,"img",4),n.jc("click",function(){return n.Hc(t),n.nc().openDialog()}),n.Xb()}if(2&t){const t=n.nc();n.yc("src","",t.pictureDisplayingService.srcPrefix,"",t.profilePicture.imageFile,"",n.Jc)}}function A(t,e){if(1&t&&n.Tb(0,"img",5),2&t){const t=n.nc();n.xc("src","",t.assetPath,"assets/img/Unknown-person.png",n.Jc)}}function B(t,e){if(1&t&&(n.Yb(0,"div",6),n.Tb(1,"app-pictures-upload",7),n.Xb()),2&t){const t=n.nc();n.Fb(1),n.vc("profileId",null==t.profile?null:t.profile.id)("profilePicture",t.profilePicture)}}let Z=(()=>{class t{constructor(t,e,i){this.pictureDisplayingService=t,this.layoutService=e,this.dialog=i,this.assetPath=u.a.assetsPath}ngOnInit(){this.screenSub=this.layoutService.onLargerScreen$.subscribe(t=>this.isLargerScreen=t)}ngOnDestroy(){this.screenSub.unsubscribe()}get profilePicture(){return this.profile.profilePictures.filter(t=>t.isHeadlinePicture)[0]||this.profile.profilePictures[0]}get otherPictures(){return this.profile.profilePictures.some(t=>t.isHeadlinePicture)?this.profile.profilePictures.filter(t=>!t.isHeadlinePicture):this.profile.profilePictures.slice(1)}openDialog(){const t=new p.e;t.maxWidth="100vw",t.width=this.isLargerScreen?"55vw":"100vw",t.height="80vh",t.maxHeight="115vw",t.data=new v.a(this.profilePicture,this.otherPictures,this.currentUserId==this.profile.userId),this.dialog.open(X,t).afterClosed().subscribe(t=>{})}}return t.\u0275fac=function(e){return new(e||t)(n.Sb(h.a),n.Sb(Y.a),n.Sb(p.b))},t.\u0275cmp=n.Mb({type:t,selectors:[["app-profile-pictures"]],inputs:{currentUserId:"currentUserId",profile:"profile"},decls:5,vars:3,consts:[[1,"profile-picture-container","d-flex","justify-content-center","align-items-center","mx-auto"],["class","img-round ml-2 mt-2 rounded-circle","appClickStopPropagation","",3,"src","click",4,"ngIf","ngIfElse"],["defaultPicture",""],["class","float-icon",4,"ngIf"],["appClickStopPropagation","",1,"img-round","ml-2","mt-2","rounded-circle",3,"src","click"],["width","400px","height","400px","appClickStopPropagation","",1,"img-round","ml-2","mt-2","rounded-circle",3,"src"],[1,"float-icon"],[3,"profileId","profilePicture"]],template:function(t,e){if(1&t&&(n.Yb(0,"div",0),n.Oc(1,N,1,2,"img",1),n.Oc(2,A,1,1,"ng-template",null,2,n.Pc),n.Oc(4,B,2,2,"div",3),n.Xb()),2&t){const t=n.Ec(3);n.Fb(1),n.vc("ngIf",e.profilePicture)("ngIfElse",t),n.Fb(3),n.vc("ngIf",e.currentUserId==(null==e.profile?null:e.profile.userId))}},directives:[l.m,C.a,$],styles:[".float-icon[_ngcontent-%COMP%]{left:calc(57vw - 43.105px);bottom:9px;position:absolute}@media screen and (min-width:400px){.float-icon[_ngcontent-%COMP%]{left:calc(56vw - 43.105px);bottom:9px}}@media screen and (min-width:485px){.float-icon[_ngcontent-%COMP%]{left:calc(55vw - 43.105px);bottom:10px}}@media screen and (min-width:550px){.float-icon[_ngcontent-%COMP%]{left:calc(54vw - 43.105px);bottom:11px}}@media screen and (min-width:570px){.float-icon[_ngcontent-%COMP%]{left:calc(54vw - 43.105px);bottom:12px}}@media screen and (min-width:620px){.float-icon[_ngcontent-%COMP%]{left:calc(53vw - 43.105px);bottom:14px}}@media screen and (min-width:667px){.float-icon[_ngcontent-%COMP%]{left:308px;bottom:15px}}.img-round[_ngcontent-%COMP%]{padding:.25rem;background-color:#fff;border:1px solid #dee2e6;object-fit:cover}.img-round[_ngcontent-%COMP%], .profile-picture-container[_ngcontent-%COMP%]{max-width:400px;max-height:400px;width:60vw;height:60vw}.profile-picture-container[_ngcontent-%COMP%]{position:relative}"]}),t})();class G extends class{constructor(t,e,i){this.id=t,this.bio=e||"",this.profilePictures=i||[]}}{constructor(t,e,i,r){super(t,e,i),this.userId=r}}var q=i("qFsG");function J(t,e){if(1&t&&(n.Wb(0),n.Qc(1),n.Vb()),2&t){const t=n.nc(2);n.Fb(1),n.Rc(null==t.profile?null:t.profile.bio)}}const V=function(t){return{firstName:t}};function W(t,e){if(1&t&&(n.Wb(0),n.Qc(1),n.oc(2,"translate"),n.Vb()),2&t){const t=n.nc(2);n.Fb(1),n.Rc(n.qc(2,1,"protected.profile.profile-bio.noBio",n.Ac(4,V,null==t.user?null:t.user.firstName)))}}function K(t,e){if(1&t){const t=n.Zb();n.Yb(0,"button",5),n.jc("click",function(){return n.Hc(t),n.nc(2).editBio=!0}),n.Yb(1,"mat-icon",6),n.Qc(2,"edit"),n.Xb(),n.Xb()}}function tt(t,e){if(1&t&&(n.Yb(0,"p",2),n.Oc(1,J,2,1,"ng-container",3),n.Oc(2,W,3,6,"ng-container",3),n.Oc(3,K,3,0,"button",4),n.Xb()),2&t){const t=n.nc();n.Fb(1),n.vc("ngIf",null==t.profile?null:t.profile.bio),n.Fb(1),n.vc("ngIf",!(null!=t.profile&&t.profile.bio)&&t.currentUserId==(null==t.profile?null:t.profile.userId)),n.Fb(1),n.vc("ngIf",t.currentUserId==(null==t.profile?null:t.profile.userId))}}function et(t,e){if(1&t&&(n.Yb(0,"mat-form-field",11),n.Tb(1,"textarea",12),n.Xb()),2&t){const t=n.nc(2);n.Fb(1),n.vc("formControl",t.bio)}}const it=function(t){return{"mat-color-primary text-white":t}};function rt(t,e){if(1&t){const t=n.Zb();n.Yb(0,"form",7),n.jc("ngSubmit",function(){return n.Hc(t),n.nc().submit()}),n.Oc(1,et,2,1,"mat-form-field",8),n.Yb(2,"div",9),n.Yb(3,"button",10),n.jc("click",function(){return n.Hc(t),n.nc().submit()}),n.Qc(4),n.oc(5,"translate"),n.Xb(),n.Xb(),n.Xb()}if(2&t){const t=n.nc();n.vc("formGroup",t.profileForm),n.Fb(1),n.vc("ngIf",t.editBio),n.Fb(2),n.vc("disabled",!(t.profileForm.valid&&!t.profileForm.untouched)||null)("ngClass",n.Ac(7,it,t.profileForm.valid&&t.profileForm.touched)),n.Fb(1),n.Sc(" ",n.pc(5,5,"actions.UPDATE")," ")}}let nt=(()=>{class t{constructor(t,e,i){this.fb=t,this.profileService=e,this.authService=i,this.editBio=!1}get bio(){return this.profileForm.get("bio")}ngOnInit(){this.user=this.authService.currentUser,this.initForm()}submit(){const t=new G(this.profile.id,this.bio.value);this.profileService.editBio(t).subscribe(t=>this.editBio=!1)}initForm(){this.profileForm=this.fb.group({bio:[this.profile.bio,[L.u.required]]})}}return t.\u0275fac=function(e){return new(e||t)(n.Sb(L.d),n.Sb(c.a),n.Sb(o.a))},t.\u0275cmp=n.Mb({type:t,selectors:[["app-profile-bio"]],inputs:{currentUserId:"currentUserId",profile:"profile"},decls:2,vars:2,consts:[["class","mt-3 text-center p-3 rounded w-75 biography mx-auto",4,"ngIf"],["class","mt-3 text-center p-3 rounded w-75 mat-dark-elevation-z4 mx-auto",3,"formGroup","ngSubmit",4,"ngIf"],[1,"mt-3","text-center","p-3","rounded","w-75","biography","mx-auto"],[4,"ngIf"],["mat-icon-button","","class","float-right align-with-text","appClickStopPropagation","",3,"click",4,"ngIf"],["mat-icon-button","","appClickStopPropagation","",1,"float-right","align-with-text",3,"click"],[1,"mat-text-primary"],[1,"mt-3","text-center","p-3","rounded","w-75","mat-dark-elevation-z4","mx-auto",3,"formGroup","ngSubmit"],["floatLabel","Biographie","class","w-100 mx-auto","appearance","outline","appClickStopPropagation","",4,"ngIf"],[1,"d-flex","justify-content-center","align-item-center"],["type","submit","mat-raised-button","","appClickStopPropagation","",3,"disabled","ngClass","click"],["floatLabel","Biographie","appearance","outline","appClickStopPropagation","",1,"w-100","mx-auto"],["matInput","",3,"formControl"]],template:function(t,e){1&t&&(n.Oc(0,tt,4,3,"p",0),n.Oc(1,rt,6,9,"form",1)),2&t&&(n.vc("ngIf",!e.editBio),n.Fb(1),n.vc("ngIf",e.editBio))},directives:[l.m,w.a,C.a,x.a,L.w,L.p,L.h,l.k,U.a,M.c,q.a,L.b,L.o,L.f],pipes:[a.c],styles:[".align-with-text[_ngcontent-%COMP%]{bottom:.75rem}"]}),t})();function ct(t,e){if(1&t&&(n.Yb(0,"div",3),n.Yb(1,"div",4),n.Tb(2,"app-profile-pictures",5),n.Xb(),n.Yb(3,"div",6),n.Tb(4,"app-profile-bio",5),n.Xb(),n.Xb()),2&t){const t=e.ngIf,i=n.nc();n.Fb(2),n.vc("profile",t)("currentUserId",null==i.user?null:i.user.id),n.Fb(2),n.vc("profile",t)("currentUserId",null==i.user?null:i.user.id)}}const ot=[{path:"",component:(()=>{class t{constructor(t,e,i,r){this.profileService=t,this.authService=e,this.translationService=i,this.translate=r}ngOnInit(){this.profile$=this.profileService.profile$,this.user=this.authService.currentUser,this.updateLang()}ngOnDestroy(){this.langSub.unsubscribe()}updateLang(){this.translate.setDefaultLang(this.translationService.defaultLang),this.langSub=this.translationService.currentLang$.subscribe(t=>this.translate.use(t))}}return t.\u0275fac=function(e){return new(e||t)(n.Sb(c.a),n.Sb(o.a),n.Sb(s.a),n.Sb(a.d))},t.\u0275cmp=n.Mb({type:t,selectors:[["app-profile"]],decls:5,vars:5,consts:[[1,"mat-dark-elevation-z3"],[1,"text-center","pt-3"],["class","row mt-3",4,"ngIf"],[1,"row","mt-3"],[1,"col-12"],[3,"profile","currentUserId"],[1,"col-12","my-5"]],template:function(t,e){1&t&&(n.Yb(0,"div",0),n.Yb(1,"h2",1),n.Qc(2),n.Xb(),n.Oc(3,ct,5,4,"div",2),n.oc(4,"async"),n.Xb()),2&t&&(n.Fb(2),n.Tc("",null==e.user?null:e.user.firstName," ",null==e.user?null:e.user.lastName,""),n.Fb(1),n.vc("ngIf",n.pc(4,3,e.profile$)))},directives:[l.m,Z,nt],pipes:[l.b],styles:[""]}),t})()}];let st=(()=>{class t{}return t.\u0275mod=n.Qb({type:t}),t.\u0275inj=n.Pb({factory:function(e){return new(e||t)},imports:[[m.c.forChild(ot)],m.c]}),t})(),at=(()=>{class t{}return t.\u0275mod=n.Qb({type:t}),t.\u0275inj=n.Pb({factory:function(e){return new(e||t)},imports:[[r.a,st]]}),t})()}}]);