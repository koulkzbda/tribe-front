(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"6H4R":function(t,e,n){"use strict";n.r(e),n.d(e,"LoginModule",function(){return P});var i=function(t){return t.JOB="JOB",t.VALIDATION="VALIDATION",t.PICTURE="PICTURE",t.SECURITY="SECURITY",t.PROFILE="PROFILE",t.PUBLICATION="PUBLICATION",t.ENTITY="ENTITY",t.NOT_CONFIRMED="NOT_CONFIRMED",t}({}),r=n("3Pt+");class a{constructor(t,e,n,i){this.firstName=t||"",this.lastName=e||"",this.email=n||"",this.password=i}}var s=n("fXoL"),o=n("tyNb"),c=n("7dP1"),b=n("dNgK"),l=n("lxpx"),u=n("sYmb"),m=n("uToo"),g=n("/t3+"),d=n("ofXK"),h=n("bTqV");function p(t,e){if(1&t){const t=s.Zb();s.Wb(0),s.Yb(1,"mat-toolbar-row",3),s.Yb(2,"div",4),s.Qc(3),s.Xb(),s.Yb(4,"button",5),s.jc("click",function(){return s.Hc(t),s.nc().sendAction()}),s.Qc(5),s.Xb(),s.Yb(6,"button",6),s.jc("click",function(){return s.Hc(t),s.nc().closeBanner()}),s.Qc(7,"OK"),s.Xb(),s.Xb(),s.Vb()}if(2&t){const t=s.nc();s.Fb(3),s.Sc("",t.message," "),s.Fb(2),s.Rc(t.actionText)}}function f(t,e){if(1&t){const t=s.Zb();s.Yb(0,"mat-toolbar-row",7),s.Yb(1,"span",4),s.Qc(2),s.Xb(),s.Xb(),s.Yb(3,"mat-toolbar-row"),s.Yb(4,"button",8),s.jc("click",function(){return s.Hc(t),s.nc().sendAction()}),s.Qc(5),s.Xb(),s.Yb(6,"button",6),s.jc("click",function(){return s.Hc(t),s.nc().closeBanner()}),s.Qc(7,"OK"),s.Xb(),s.Xb()}if(2&t){const t=s.nc();s.Fb(2),s.Rc(t.message),s.Fb(3),s.Rc(t.actionText)}}let S=(()=>{class t{constructor(t){this.layoutService=t,this.action=new s.p,this.closed=!1}ngOnInit(){this.getWidth()}ngOnDestroy(){this.widthSub.unsubscribe()}sendAction(){this.action.emit(null),this.closeBanner()}closeBanner(){this.closed=!0}getWidth(){this.widthSub=this.layoutService.innerWidth$.subscribe(t=>{this.onLargerScreen=t>950})}}return t.\u0275fac=function(e){return new(e||t)(s.Sb(m.a))},t.\u0275cmp=s.Mb({type:t,selectors:[["app-banner"]],inputs:{opened:"opened",message:"message",actionText:"actionText"},outputs:{action:"action"},decls:4,vars:4,consts:[[1,"banner","bg-z1-5"],[4,"ngIf","ngIfElse"],["onSmallerScreen",""],[1,"my-3","h-auto","d-flex","justify-content-center"],[1,"font-size-7","font-weight-normal","text-wrap","h-auto","line-height-normal"],["mat-button","","color","accent",1,"ml-auto-2",3,"click"],["mat-button","","color","primary",3,"click"],[1,"mt-3","h-auto"],["mat-button","","color","accent",1,"ml-auto",3,"click"]],template:function(t,e){if(1&t&&(s.Yb(0,"mat-toolbar",0),s.Oc(1,p,8,2,"ng-container",1),s.Oc(2,f,8,2,"ng-template",null,2,s.Pc),s.Xb()),2&t){const t=s.Ec(3);s.Kb("opened",e.opened&&!e.closed),s.Fb(1),s.vc("ngIf",e.onLargerScreen)("ngIfElse",t)}},directives:[g.a,d.m,g.c,h.a],styles:[".banner[_ngcontent-%COMP%]{min-height:0!important;max-height:0;overflow-y:hidden;transition:max-height .4s ease-in-out}.banner.opened[_ngcontent-%COMP%]{max-height:128px;transition:max-height .6s ease-in-out}.line-height-normal[_ngcontent-%COMP%]{line-height:normal}.ml-auto-2[_ngcontent-%COMP%]{margin-left:calc(calc(100% - 950px)/2)}.bg-z1-5[_ngcontent-%COMP%]{background:#292929!important}"]}),t})();var v=n("Wp6s"),w=n("kmnG"),F=n("qFsG"),Y=n("NFeN"),X=n("znSr");function y(t,e){1&t&&(s.Yb(0,"mat-error"),s.Qc(1),s.oc(2,"translate"),s.Xb()),2&t&&(s.Fb(1),s.Rc(s.pc(2,1,"public.login.error.email.required")))}function T(t,e){1&t&&(s.Yb(0,"mat-error"),s.Qc(1),s.oc(2,"translate"),s.Xb()),2&t&&(s.Fb(1),s.Rc(s.pc(2,1,"public.login.error.email.invalid")))}function I(t,e){1&t&&(s.Yb(0,"mat-error"),s.Qc(1),s.oc(2,"translate"),s.Xb()),2&t&&(s.Fb(1),s.Sc("",s.pc(2,1,"public.login.error.password.required")," "))}const O=function(t,e){return{"mat-color-primary text-white":t,"color-grey":e}},k=[{path:"",component:(()=>{class t{constructor(t,e,n,i,r,a){this.fb=t,this.router=e,this.authService=n,this.snackBar=i,this.translationService=r,this.translate=a,this.hidePass=!0}get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}ngOnInit(){this.initForm(),this.updateLang()}ngOnDestroy(){this.langSub.unsubscribe(),this.userEmailSub.unsubscribe(),this.sendEmailSub&&this.sendEmailSub.unsubscribe(),this.messageTranslationSub&&this.messageTranslationSub.unsubscribe(),this.message2TranslationSub&&this.message2TranslationSub.unsubscribe()}goToForgetPassword(){this.router.navigate(["/forgot-password"])}initForm(){this.userEmailSub=this.authService.userEmail$.subscribe(t=>{this.loginForm=this.fb.group({email:[t,[r.u.required,r.u.email]],password:["",[r.u.required]]})})}updateLang(){this.translate.setDefaultLang(this.translationService.defaultLang),this.langSub=this.translationService.currentLang$.subscribe(t=>this.translate.use(t))}submit(){this.authService.login(this.email.value,this.password.value).subscribe(t=>{this.router.navigate(t.firstSystemCreated?["/user/feedbuzz"]:["/user/welcome"])},t=>{var e;(null===(e=null==t?void 0:t.error)||void 0===e?void 0:e.code)==i.NOT_CONFIRMED?(this.errorMessage=t.error,this.messageTranslationSub=this.messageTranslationSub=this.translate.get("public.emailConfirmation.confirmationEmailHasBeenSent",{email:this.errorMessage.message}).subscribe(t=>{this.message=t})):this.loginForm.reset()})}triggerSubmit(t){t.preventDefault(),this.loginForm.valid&&this.submit()}onAction(){this.sendEmailSub=this.authService.sendEmailConfirmation(new a(null,null,this.errorMessage.message)).subscribe(t=>{this.message2TranslationSub=this.translate.get("public.login.confirmationEmailResent",{email:t.email}).subscribe(t=>{this.snackBar.open(t,"OK",{duration:8e4,panelClass:"dark-snackbar"})})})}}return t.\u0275fac=function(e){return new(e||t)(s.Sb(r.d),s.Sb(o.b),s.Sb(c.a),s.Sb(b.a),s.Sb(l.a),s.Sb(u.d))},t.\u0275cmp=s.Mb({type:t,selectors:[["app-login"]],decls:36,vars:29,consts:[[1,"mat-dark-elevation-z2","h-full"],[3,"opened","message","actionText","action"],[1,"text-center","display-4","my-4","my-sm-5","text-white"],[1,"container"],[1,"col-10","col-sm-9","col-md-6","mx-auto","mb-3","mb-md-0"],[3,"formGroup","ngSubmit"],["appearance","fill",1,"w-100","my-3"],["matInput","","placeholder","victor.hugo@tribe.com",3,"formControl","keydown.enter"],[4,"ngIf"],["appearance","fill",1,"w-100","mb-3"],["matInput","",3,"formControl","type","keydown.enter"],["mat-icon-button","","matSuffix","",3,"click"],[1,"text-center"],[1,"btn-link","mat-text-accent",3,"click"],["type","submit","mat-raised-button","",3,"disabled","ngClass","click"]],template:function(t,e){1&t&&(s.Yb(0,"div",0),s.Yb(1,"app-banner",1),s.jc("action",function(){return e.onAction()}),s.oc(2,"translate"),s.Xb(),s.Yb(3,"h1",2),s.Qc(4,"Tribe"),s.Xb(),s.Yb(5,"div",3),s.Yb(6,"div",4),s.Yb(7,"mat-card"),s.Yb(8,"mat-card-content"),s.Yb(9,"form",5),s.jc("ngSubmit",function(){return e.submit()}),s.Yb(10,"mat-form-field",6),s.Yb(11,"mat-label"),s.Qc(12,"Email"),s.Xb(),s.Yb(13,"input",7),s.jc("keydown.enter",function(t){return e.triggerSubmit(t)}),s.Xb(),s.Oc(14,y,3,3,"mat-error",8),s.Oc(15,T,3,3,"mat-error",8),s.Xb(),s.Yb(16,"mat-form-field",9),s.Yb(17,"mat-label"),s.Qc(18),s.oc(19,"translate"),s.Xb(),s.Yb(20,"input",10),s.jc("keydown.enter",function(t){return e.triggerSubmit(t)}),s.Xb(),s.Yb(21,"button",11),s.jc("click",function(){return e.hidePass=!e.hidePass}),s.Yb(22,"mat-icon"),s.Qc(23),s.Xb(),s.Xb(),s.Oc(24,I,3,3,"mat-error",8),s.Xb(),s.Xb(),s.Yb(25,"p",12),s.Yb(26,"a",13),s.jc("click",function(){return e.goToForgetPassword()}),s.Qc(27),s.oc(28,"translate"),s.Xb(),s.Xb(),s.Xb(),s.Yb(29,"mat-card-actions"),s.Yb(30,"p",12),s.Yb(31,"button",14),s.jc("click",function(){return e.submit()}),s.Qc(32),s.oc(33,"translate"),s.Yb(34,"mat-icon"),s.Qc(35,"arrow_right_alt"),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb()),2&t&&(s.Fb(1),s.wc("actionText",s.pc(2,18,"actions.RESEND")),s.vc("opened",!!e.errorMessage&&!!e.message)("message",e.message),s.Fb(8),s.vc("formGroup",e.loginForm),s.Fb(4),s.vc("formControl",e.email),s.Fb(1),s.vc("ngIf",null==e.email.errors?null:e.email.errors.required),s.Fb(1),s.vc("ngIf",null==e.email.errors?null:e.email.errors.email),s.Fb(3),s.Rc(s.pc(19,20,"public.login.password")),s.Fb(2),s.vc("formControl",e.password)("type",e.hidePass?"password":"text"),s.Fb(1),s.Gb("aria-label","hide password")("aria-pressed",e.hidePass),s.Fb(2),s.Rc(e.hidePass?"visibility_off":"visibility"),s.Fb(1),s.vc("ngIf",null==e.password.errors?null:e.password.errors.required),s.Fb(3),s.Rc(s.pc(28,22,"public.login.passwordForgotten")),s.Fb(4),s.vc("disabled",!e.loginForm.valid)("ngClass",s.Bc(26,O,e.loginForm.valid,!e.loginForm.valid)),s.Fb(1),s.Sc(" ",s.pc(33,24,"public.login.logIn")," "))},directives:[S,v.a,v.d,r.w,r.p,r.h,w.c,w.g,F.a,r.b,r.o,r.f,d.m,h.a,w.i,Y.a,v.b,d.k,X.a,w.b],pipes:[u.c],styles:[""]}),t})()}];let C=(()=>{class t{}return t.\u0275mod=s.Qb({type:t}),t.\u0275inj=s.Pb({factory:function(e){return new(e||t)},imports:[[o.c.forChild(k)],o.c]}),t})();var E=n("PCNd");let P=(()=>{class t{}return t.\u0275mod=s.Qb({type:t}),t.\u0275inj=s.Pb({factory:function(e){return new(e||t)},imports:[[E.b,C]]}),t})()}}]);